# Deeplayer UI Spec - 스마트폰 로컬 음악 플레이어

## 1. 화면 구성 (Screen Map)

```
┌─────────────────────────────────────┐
│         앱 전체 구조                  │
│                                     │
│  [라이브러리] ─── [Now Playing] ─── [검색]
│       │                │              │
│   ┌───┴───┐        ┌──┴──┐       전체 검색
│   │ 곡    │        │ 가사 │
│   │ 앨범  │        │ 큐   │
│   │ 아티스트│       └─────┘
│   │ 폴더  │
│   │ 플레이리스트│
│   └───────┘
└─────────────────────────────────────┘
```

## 2. 탭 구조 (Bottom Navigation)

```
┌──────────────────────────────────────────┐
│                                          │
│            [콘텐츠 영역]                   │
│                                          │
├──────────────────────────────────────────┤
│  🎵 Mini Player (현재 재생곡)              │
├──────────────────────────────────────────┤
│  라이브러리  │  검색  │  설정              │
└──────────────────────────────────────────┘
```

- **Bottom Nav**: 3탭 (라이브러리 / 검색 / 설정)
- **Mini Player**: Bottom Nav 바로 위에 항상 표시, 탭하면 Now Playing 전체 화면으로 확장
- Mini Player는 곡 재생 중일 때만 표시

## 3. 라이브러리 화면

### 3-1. 상단 필터 칩

```
┌──────────────────────────────────────────┐
│  라이브러리                          ≡ 정렬 │
├──────────────────────────────────────────┤
│  [곡] [앨범] [아티스트] [폴더] [플레이리스트] │
├──────────────────────────────────────────┤
│                                          │
│  ♪ 곡 제목 A                             │
│    아티스트명 · 앨범명            3:42     │
│  ─────────────────────────────────────── │
│  ♪ 곡 제목 B                             │
│    아티스트명 · 앨범명            4:15     │
│  ─────────────────────────────────────── │
│  ♪ 곡 제목 C                             │
│    아티스트명 · 앨범명            2:58     │
│                                          │
│         ... (스크롤)                      │
│                                          │
├──────────────────────────────────────────┤
│  🎵 현재곡 · 아티스트    ▶  ▷▷           │
├──────────────────────────────────────────┤
│  라이브러리  │  검색  │  설정              │
└──────────────────────────────────────────┘
```

### 3-2. 곡 목록 (기본 탭)

- **정렬**: 제목순 / 최근 추가순 / 아티스트순 / 앨범순
- **각 항목**: 앨범아트 썸네일(40dp) + 곡명 + 아티스트·앨범 + 재생시간
- **롱프레스**: 컨텍스트 메뉴 (다음에 재생 / 큐에 추가 / 플레이리스트에 추가 / 정보 / 삭제)
- **우측 알파벳/가나다 Fast Scroller**: 대량 라이브러리 탐색용

### 3-3. 앨범 탭

```
┌──────────────────────────────────────────┐
│  [곡] [앨범] [아티스트] [폴더] [플레이리스트] │
├──────────────────────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐                   │
│  │ 🎨 │ │ 🎨 │ │ 🎨 │                   │
│  │    │ │    │ │    │                   │
│  └────┘ └────┘ └────┘                   │
│  앨범A   앨범B   앨범C                    │
│  아티스트 아티스트 아티스트                  │
│                                          │
│  ┌────┐ ┌────┐ ┌────┐                   │
│  │ 🎨 │ │ 🎨 │ │ 🎨 │                   │
│  │    │ │    │ │    │                   │
│  └────┘ └────┘ └────┘                   │
│  앨범D   앨범E   앨범F                    │
└──────────────────────────────────────────┘
```

- **그리드 레이아웃**: 3열 (앨범아트 중심)
- **탭 → 앨범 상세**: 앨범아트 히어로 이미지 + 트랙리스트

### 3-4. 아티스트 탭

- 리스트 형태, 아티스트 이미지(원형) + 이름 + 앨범 수 / 곡 수
- 탭 → 아티스트 상세 (앨범 목록 + 전체 곡 목록)

### 3-5. 폴더 탭

- 디바이스 파일시스템 기반 트리 탐색
- 빵 부스러기(Breadcrumb) 네비게이션: `내부저장소 > Music > 폴더명`

### 3-6. 플레이리스트 탭

- "새 플레이리스트 만들기" 버튼 상단 고정
- 최근 재생 / 자주 재생 / 사용자 생성 플레이리스트
- 드래그로 곡 순서 변경

## 4. Now Playing (전체 화면)

Mini Player를 탭하거나 위로 스와이프하면 전체 화면으로 확장.

```
┌──────────────────────────────────────────┐
│  ∨ (아래로 접기)              ⋮ (메뉴)    │
│                                          │
│         ┌──────────────────┐             │
│         │                  │             │
│         │                  │             │
│         │   앨범 아트워크    │             │
│         │   (큰 이미지)     │             │
│         │                  │             │
│         │                  │             │
│         └──────────────────┘             │
│                                          │
│         곡 제목                           │
│         아티스트명 — 앨범명                │
│                                          │
│  ───●──────────────────────────  1:23    │
│  0:00                            3:42    │
│                                          │
│       🔀    ◁◁    ▶    ▷▷    🔁         │
│                                          │
│     🔈 ────────────────────── 🔊         │
│                                          │
│     ♡ (좋아요)    📝 (가사)    ≡ (큐)      │
│                                          │
└──────────────────────────────────────────┘
```

### 4-1. 컨트롤 영역

| 요소 | 동작 |
|------|------|
| 앨범아트 | 좌우 스와이프로 이전/다음 곡 |
| 프로그레스 바 | 드래그로 seek, 탭으로 점프 |
| ▶ / ⏸ | 재생 / 일시정지 |
| ◁◁ / ▷▷ | 이전 / 다음 곡 |
| 🔀 | 셔플 토글 |
| 🔁 | 반복 모드 순환 (전체→1곡→끄기) |
| 볼륨 슬라이더 | 앱 내 볼륨 제어 |

### 4-2. 하단 액션

- **♡ 좋아요**: 즐겨찾기 토글
- **📝 가사**: 가사 화면으로 전환 (아래 섹션 참조)
- **≡ 큐**: 재생 대기열 화면으로 전환

### 4-3. 가사 화면 (Now Playing 내 전환)

```
┌──────────────────────────────────────────┐
│  ∨                            ⋮          │
│                                          │
│         (작은 앨범아트 + 곡명)             │
│                                          │
│                                          │
│     지나간 가사 라인 (흐릿하게)              │
│                                          │
│     ▶ 현재 가사 라인 (하이라이트/볼드)       │
│                                          │
│     다음 가사 라인 (보통 밝기)              │
│                                          │
│     이후 가사 라인 (보통 밝기)              │
│                                          │
│                                          │
│  ───●──────────────────────────  1:23    │
│       🔀    ◁◁    ▶    ▷▷    🔁         │
└──────────────────────────────────────────┘
```

- 현재 재생 위치의 가사가 화면 중앙에 고정
- 자동 스크롤, 수동 스크롤 시 3초 후 자동 복귀
- 가사 라인 탭 → 해당 시점으로 seek
- 가사 없을 경우: "가사 없음" 안내 + 정렬 시작 버튼

### 4-4. 큐 화면

```
┌──────────────────────────────────────────┐
│  ∨  재생 대기열 (12곡)         전체 삭제   │
├──────────────────────────────────────────┤
│  ≡ ♪ 현재 재생 중인 곡 (하이라이트)        │
│  ≡ ♪ 다음 곡 A                           │
│  ≡ ♪ 다음 곡 B                           │
│  ≡ ♪ 다음 곡 C                           │
│     ...                                  │
├──────────────────────────────────────────┤
│  ───●──────────────────────────          │
│       🔀    ◁◁    ▶    ▷▷    🔁         │
└──────────────────────────────────────────┘
```

- 드래그 핸들(≡)로 순서 변경
- 좌로 스와이프하면 큐에서 제거
- 현재 재생 곡은 시각적으로 구분

## 5. 검색 화면

```
┌──────────────────────────────────────────┐
│  🔍 곡, 아티스트, 앨범 검색...             │
├──────────────────────────────────────────┤
│                                          │
│  최근 검색                    전체 삭제    │
│  ─────────────────────────────────────── │
│  · 검색어 A                              │
│  · 검색어 B                              │
│                                          │
│  ─────────────────────────────────────── │
│  검색 결과 (입력 시):                      │
│                                          │
│  곡 (3)                                  │
│    ♪ 매칭곡1    ♪ 매칭곡2    ♪ 매칭곡3     │
│                                          │
│  앨범 (1)                                │
│    🎨 매칭앨범1                            │
│                                          │
│  아티스트 (2)                             │
│    👤 매칭아티스트1  👤 매칭아티스트2        │
│                                          │
└──────────────────────────────────────────┘
```

- 실시간 필터링 (타이핑 즉시 결과 표시)
- 결과를 곡/앨범/아티스트 섹션별로 그룹핑
- 각 섹션 "더보기"로 확장 가능

## 6. 설정 화면

```
┌──────────────────────────────────────────┐
│  설정                                    │
├──────────────────────────────────────────┤
│                                          │
│  재생                                    │
│  ─────────────────────────────────────── │
│  · 크로스페이드               [슬라이더]   │
│  · 갭리스 재생                    [토글]   │
│  · 재생 속도                     1.0x     │
│  · 이퀄라이저                      >      │
│                                          │
│  라이브러리                               │
│  ─────────────────────────────────────── │
│  · 스캔 폴더 관리                   >      │
│  · 블랙리스트 폴더                  >      │
│  · 라이브러리 다시 스캔             >      │
│                                          │
│  가사                                    │
│  ─────────────────────────────────────── │
│  · 자동 가사 정렬                  [토글]   │
│  · 가사 글꼴 크기              [슬라이더]   │
│                                          │
│  테마                                    │
│  ─────────────────────────────────────── │
│  · 다크/라이트/시스템              [선택]   │
│  · 앨범아트 기반 동적 테마         [토글]   │
│                                          │
│  정보                                    │
│  ─────────────────────────────────────── │
│  · 버전                         v1.0.0   │
│  · 오픈소스 라이선스                >      │
│                                          │
└──────────────────────────────────────────┘
```

## 7. 공통 인터랙션 패턴

### 7-1. 제스처

| 제스처 | 위치 | 동작 |
|--------|------|------|
| 위로 스와이프 | Mini Player | Now Playing 확장 |
| 아래로 스와이프 | Now Playing 상단 | Now Playing 축소 |
| 좌/우 스와이프 | Now Playing 앨범아트 | 이전/다음 곡 |
| 좌 스와이프 | 곡 리스트 아이템 | 큐에 추가 |
| 롱프레스 | 곡 리스트 아이템 | 컨텍스트 메뉴 |

### 7-2. 컨텍스트 메뉴 (Bottom Sheet)

```
┌──────────────────────────────────────────┐
│  ── (드래그 핸들)                         │
│                                          │
│  🎨 앨범아트  곡 제목                      │
│              아티스트명                    │
│                                          │
│  ▶  다음에 재생                           │
│  ≡  큐 마지막에 추가                       │
│  +  플레이리스트에 추가                    │
│  👤 아티스트로 이동                        │
│  💿 앨범으로 이동                          │
│  ℹ  곡 정보                              │
│  🗑  삭제                                 │
│                                          │
└──────────────────────────────────────────┘
```

### 7-3. 알림 (Notification)

```
┌──────────────────────────────────────────┐
│  Deeplayer                      now      │
│  🎨 곡 제목                              │
│     아티스트명                            │
│     ◁◁    ▶    ▷▷    ✕                  │
└──────────────────────────────────────────┘
```

- MediaStyle Notification (잠금화면에서도 컨트롤 가능)
- 앨범아트 표시, 재생/일시정지/이전/다음/닫기

## 8. 시각 디자인 원칙

| 항목 | 방향 |
|------|------|
| **컬러** | Material You 기반, 앨범아트에서 Dynamic Color 추출 |
| **타이포** | 곡명 16sp Medium, 부제 14sp Regular, 가사 20sp |
| **간격** | 리스트 아이템 높이 64dp, 좌우 패딩 16dp |
| **전환** | Shared Element Transition (앨범아트 → Now Playing) |
| **다크모드** | 기본 지원, 순수 블랙(AMOLED) 옵션 |
| **접근성** | 최소 터치 영역 48dp, TalkBack 라벨 제공 |

## 9. 화면 전환 플로우

```
라이브러리 (곡 탭)
    │
    ├─ 곡 탭 → 재생 시작 → Mini Player 표시
    │                          │
    │                     위로 스와이프
    │                          │
    │                    Now Playing
    │                     ├─ 가사 뷰
    │                     └─ 큐 뷰
    │
    ├─ 앨범 탭 → 앨범 상세 → 곡 탭
    │
    ├─ 아티스트 탭 → 아티스트 상세 → 앨범/곡
    │
    ├─ 폴더 탭 → 폴더 탐색 → 곡 재생
    │
    └─ 플레이리스트 탭 → 플레이리스트 상세 → 곡 재생
```

## 10. 핵심 차별점: 가사 동기화

일반적인 로컬 음악 플레이어와 구분되는 핵심 기능은 **온디바이스 가사-오디오 동기화**이다.

- Now Playing 화면에서 가사 버튼 탭 시 동기화된 가사 표시
- 가사 파일이 없는 곡: "가사 정렬 시작" 버튼으로 온디바이스 ML 추론 트리거
- 정렬 진행 상태를 프로그레스 바로 표시
- 정렬 완료 후 즉시 동기화된 가사 뷰로 전환
- 백그라운드 배치 정렬 지원 (설정에서 "전체 라이브러리 가사 정렬")
